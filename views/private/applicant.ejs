<!DOCTYPE html>
<html lang="en">

<head>
    <title>Dashboard <small>Statistics Overview</small></title>
</head>
<!-- Page Heading -->
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Dashboard</h1>
        <ol class="breadcrumb">
            <li class="active">
                <i class="fa fa-dashboard"></i> Dashboard: Hello <%=session.me.firstName%>! How are you? :)
            </li>
        </ol>
    </div>
</div>
<!-- /.row -->
<!--
<div class="row">
    <div class="col-lg-12">
        <div class="alert alert-info alert-dismissable">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <i class="fa fa-info-circle"></i> <strong>Like SB Admin?</strong> Try out <a href="http://startbootstrap.com/template-overviews/sb-admin-2" class="alert-link">SB Admin 2</a> for additional features!
        </div>
    </div>
</div>
<!-- /.row -->
<!-- stats -->
<!--<div class="row">-->
<!--    <div class="col-lg-3 col-md-6">-->
<!--        <div class="panel panel-primary">-->
<!--            <div class="panel-heading">-->
<!--                <div class="row">-->
<!--                    <div class="col-xs-3">-->
<!--                        <i class="fa fa-user fa-5x"></i>-->
<!--                    </div>-->
<!--                    <div class="col-xs-9 text-right">-->
<!--                        <div class="huge"><%=applicants.length%></div>-->
<!--                        <div>New Applicants!</div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <a href="#">-->
<!--                <div class="panel-footer">-->
<!--                    <span class="pull-left">View Details</span>-->
<!--                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>-->
<!--                    <div class="clearfix"></div>-->
<!--                </div>-->
<!--            </a>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="col-lg-3 col-md-6">-->
<!--        <div class="panel panel-green">-->
<!--            <div class="panel-heading">-->
<!--                <div class="row">-->
<!--                    <div class="col-xs-3">-->
<!--                        <i class="fa fa-rocket fa-5x"></i>-->
<!--                    </div>-->
<!--                    <div class="col-xs-9 text-right">-->
<!--                        <div class="huge">12</div>-->
<!--                        <div>New Deployments!</div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <a href="#">-->
<!--                <div class="panel-footer">-->
<!--                    <span class="pull-left">View Details</span>-->
<!--                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>-->
<!--                    <div class="clearfix"></div>-->
<!--                </div>-->
<!--            </a>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="col-lg-3 col-md-6">-->
<!--        <div class="panel panel-yellow">-->
<!--            <div class="panel-heading">-->
<!--                <div class="row">-->
<!--                    <div class="col-xs-3">-->
<!--                        <i class="fa fa-users fa-5x"></i>-->
<!--                    </div>-->
<!--                    <div class="col-xs-9 text-right">-->
<!--                        <div class="huge">124</div>-->
<!--                        <div>All Applicants!</div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <a href="#">-->
<!--                <div class="panel-footer">-->
<!--                    <span class="pull-left">View Details</span>-->
<!--                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>-->
<!--                    <div class="clearfix"></div>-->
<!--                </div>-->
<!--            </a>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="col-lg-3 col-md-6">-->
<!--        <div class="panel panel-red">-->
<!--            <div class="panel-heading">-->
<!--                <div class="row">-->
<!--                    <div class="col-xs-3">-->
<!--                        <i class="fa fa-support fa-5x"></i>-->
<!--                    </div>-->
<!--                    <div class="col-xs-9 text-right">-->
<!--                        <div class="huge">13</div>-->
<!--                        <div>Support Tickets!</div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <a href="#">-->
<!--                <div class="panel-footer">-->
<!--                    <span class="pull-left">View Details</span>-->
<!--                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>-->
<!--                    <div class="clearfix"></div>-->
<!--                </div>-->
<!--            </a>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!-- /.row -->

<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title"><i class="fa fa fa-user fa-fw"></i> Applicant</h3>
            </div>
            <div class="panel-body">
                 <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active"><a href="#tab-applicant-view" aria-controls="tab-applicant-view" role="tab" data-toggle="tab">Index Card</a></li>
    <% if (session.me.role !== "viewer") { %>
        <li role="presentation"><a href="#tab-applicant-create" aria-controls="tab-applicant-create" role="tab" data-toggle="tab">Create</a></li>
     <% } %>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <!-- APPLICANT VIEW TAB -->
    <div role="tabpanel" class="tab-pane active" id="tab-applicant-view">
                <div class='col-lg-12'>
                    <br/>
                    <a href="/dashboard" class="btn btn-success"><i class="fa fa-refresh"></i> Refresh</a><br/><br/>
                    <div class="table-responsive">
                            <table id="table-applicant-results" class="table table-bordered table-hover table-striped" cellspacing="0" width="100%">
                                <thead>
                                    <tr>
                                        <th>
                                            <% if (me.role === "su" | me.role === "admin") { %>
                                            Edit&nbsp;|
                                            <% } %>
                                            View
                                        </th>
                                        <th>Reference No.</th>
                                        <th>Status</th>
                                        <th>Date Deployed</th>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Birthdate</th>
                                        <th>Passport No.</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% if (typeof applicants !== 'undefined') {
                                        for (var i=0; i < applicants.length; i++) { %>
                                        <tr>
                                            <td>
                                                <% if (me.role === "su" | me.role === "admin") { %>
                                                <a name="update:<%=applicants[i].id%>:<%=me.role%>" href='#tab-applicant-update' role='tab' data-toggle='tab'><i class='fa fa-pencil-square-o'></i></a>&nbsp;&nbsp;|&nbsp;&nbsp;
                                                <% } %>
                                                <a name="view:<%=applicants[i].id%>:<%=me.role%>" href='#tab-applicant-indexCard' role='tab' data-toggle='tab'><i class='fa fa-folder-open'></i></i></a>
                                            </td>
                                          <td><%=applicants[i].referenceNo %></td>
                                          <td>
                                            <% if (applicants[i].dateDeployed === undefined) { %>
                                            NEW
                                            <% } else { %>
                                            DEPLOYED
                                            <% } %>
                                          </td>
                                          <td>
                                              <%
                                              if (applicants[i].dateDeployed !== undefined) {
                                              var date    = new Date(applicants[i].dateDeployed),
                                                    yr      = date.getFullYear(),
                                                    month   = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1),
                                                    day     = date.getDate()  < 10 ? '0' + date.getDate()  : date.getDate(),
                                                    newDate = month + '-' + day + '-' + yr;
                                              %>
                                              <%=newDate%>
                                              <% } else { %>
                                              N/A
                                              <% } %>
                                          </td>
                                          <td><%=applicants[i].firstName %></td>
                                          <td><%=applicants[i].lastName %></td>
                                          <td>
                                              <%
                                              var date    = new Date(applicants[i].dateOfBirth),
                                                    yr      = date.getFullYear(),
                                                    month   = date.getMonth() < 9 ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1),
                                                    day     = date.getDate()  < 10 ? '0' + date.getDate()  : date.getDate(),
                                                    newDate = month + '-' + day + '-' + yr;
                                              %>
                                              <%=newDate%>
                                          </td>
                                          <td><%=applicants[i].passportNo %></td>
                                        </tr>
                                        <% }
                                    }%>
                                </tbody>
                            </table>
                        </div>
                </div>
    </div>
    <!-- APPLICANT INDEX CARD TAB -->
    <div role="tabpanel" class="tab-pane" id="tab-applicant-indexCard">
        <div class='col-lg-12'>
            <div class="row">
                <div class="col-lg-12">
                    <br/>
                    <a href="#tab-applicant-view" aria-controls="tab-applicant-view" role="tab" data-toggle="tab"><i class="fa fa-arrow-circle-left"></i> Go back</a>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6">
                    <h2>Applicant Index Card</h2><br/><br/>
                    <div id="applicant-indexCard-message" class="form-group">
                    </div>
                </div>
                <div class="col-lg-6">
                    <h2>Transaction Summary</h2><br/><br/>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-3">
                    <form id="applicant-indexCard">
                    <div class="form-group">
                       <label>Reference No.</label>
                       <p name="referenceNo" class="form-control-static"></p>
                    </div>
                    <div class="form-group">
                        <label>First Name</label>
                        <p name="firstName" class="form-control-static"></p>
                    </div>
                    <div class="form-group">
                        <label>Last Name</label>
                        <p name="lastName" class="form-control-static"></p>
                    </div>
                    <div class="form-group">
                        <label>Date of Birth</label>
                         <p name="dateOfBirth" class="form-control-static"></p>
                    </div>
                    <div class="form-group">
                        <label>Passport No.</label>
                        <p name="passportNo" class="form-control-static"></p>
                    </div>
                    </form>
                </div>
                <div class="col-lg-3">
                    <form id="applicant-indexCard-col2">
                        <div id="cont-oec" class="form-group">
                            <label>OEC</label>
                            <p name="oec" class="form-control-static"></p>
                        </div>
                        <div id="cont-cg" class="form-group">
                            <label>CG</label>
                            <p name="cg" class="form-control-static"></p>
                        </div>
                        <div id="cont-pdos" class="form-group">
                            <label>PDOS</label>
                            <p name="pdos" class="form-control-static"></p>
                        </div>
                        <div id="cont-principal" class="form-group">
                        </div>
                        <div id="cont-employer" class="form-group">
                            <!-- to be continued: check whether employer has value, if not, display input field for update -->
                            <!--<label>Employer</label>-->
                            <!--<p name="employer" class="form-control-static"></p>-->
                        </div>
                        <div class="form-group">
                            <label>Country</label>
                            <p name="country" class="form-control-static"></p>
                        </div>
                        <div id="cont-deployment" class="form-group">
                            <!--<label>Deployment Date</label>-->
                            <!--<input name="dateDeployed" class="form-control" placeholder="Deployment Date">-->
                        </div>
                        <div class="form-group">
                            <input name="id" type="hidden" class="form-control">
                            <input name="updatedBy" type="hidden" value="<%= me.username %>">
                            <input name="role" type="hidden" value="<%= me.role %>">
                            <% if (session.me.role !== "viewer") { %>
                            <button id="indexCard-btn-update" class="btn btn-success">Update</button>
                            <% } %>
                        </div>
                    </form>
                </div>
                <div class="col-lg-6">
                    <form id="applicant-transaction-summary">
                        <div class="form-group">
                           <label>Total Payment</label>
                           <p name="total-payment" class="form-control-static"></p>
                        </div>
                        <div class="form-group">
                           <label>Total Expense</label>
                           <p name="total-expense" class="form-control-static"></p>
                        </div>
                        <div class="form-group">
                           <label>Total Difference</label>
                           <p name="total-difference" class="form-control-static"></p>
                        </div>
                    </form>
                </div>
                
            </div>
            <% if (session.me.role !== "viewer") { %>
            <div class="row">
                <div class="col-lg-4">
                    <h2>Log Transaction</h2>
                    <div id="applicant-transaction-message" class="form-group">
                    </div>
                </div>
                <div class="col-lg-4" id="tab-applicant-indexCard-txListing"><h2>Transaction Listing</h2><a href="report/ledger?id=" target="_blank">Detailed View</a><br/><br/></div>
            </div>
            <% } %>
            <div class="row">
                <% if (session.me.role !== "viewer") { %>
                    <div class="col-xs-4">
                        <!-- PAYMENT CREATE -->
                        <form id="applicant-transaction-create">
                            <div class="form-group">
                               <input id="applicant-transaction-btn-reset" type="reset" class="btn btn-warning" value="New/Clear">
                            </div>
                            <div class="form-group">
                                <label>Transation <i class="fa fa-check"></i></label>
                                <select id="ddl-transaction" class="form-control">
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Type <i class="fa fa-check"></i></label>
                                <select id="ddl-transaction-type" name="type" class="form-control">
                                    <option>(Select Type)</option>
                                </select>
                            </div>
                            <div id="cont-transaction-center" class="form-group">
                            </div>
                            <div class="form-group">
                                <label>Transaction Date <i class="fa fa-check"></i></label>
                                <div class='input-group date' id='transaction-date-create'>
                                <input name='transactionDate' type='text' class="form-control" placeholder="Transaction Date" />
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar">
                                    </span>
                                </span>
                                </div>
                            </div>
                            <!--<div class="form-group" id="cont-transaction-actualCost">-->
                            <!--</div>-->
                            <div class="form-group">
                                <label>Amount <i class="fa fa-check"></i></label>
                                <input name="amount" class="form-control" placeholder="Amount">
                            </div>
                            <div class="form-group" id="cont-transaction-servicefee">
                            </div>
                            <div class="form-group">
                            <input name="owner" type="hidden" class="form-control" value="">
                            <input name="createdBy" type="hidden" value="<%= me.username %>">
                            <input name="updatedBy" type="hidden" value="<%= me.username %>">
                            <input name="role" type="hidden" value="<%= me.role %>">
                            <button class="btn btn-warning">Save</button>
                        </div>
                        </form>
                    </div>
                    <div id="cont-applicant-transactions" class="col-lg-8">
                    </div>
                <% } else { %>
                    <div class="col-lg-12" id="tab-applicant-indexCard-txListing"><h2>Transaction Listing</h2><a href="report/ledger?id=" target="_blank">Detailed View</a><br/><br/></div>
                    <div id="cont-applicant-transactions" class="col-lg-12">
                    </div>
                <% } %>
            </div>
            
        </div>
    </div>
    <!-- CREATE APPLICANT TAB -->
    <div role="tabpanel" class="tab-pane" id="tab-applicant-create">
        <form id="applicant-create">
                <div class="col-lg-12">
                    <br/>
                    <input id="applicant-create-btn-reset" type="reset" class="btn btn-success" value="New/Clear">
                    <br/><br/>
                    <div id="applicant-create-message" class="form-group">
                    </div>
                </div>
                <div class="col-lg-6">
                    <!--<div class="form-group">-->
                    <!--   <label>Reference No. <i class="fa fa-check"></i></label>-->
                    <!--   <input name="referenceNo" class="form-control" placeholder="Reference No.">-->
                    <!--</div>-->
                    <div class="form-group">
                        <label>First Name <i class="fa fa-check"></i></label>
                        <input name="firstName" class="form-control" placeholder="First Name">
                    </div>
                    <div class="form-group">
                        <label>Last Name <i class="fa fa-check"></i></label>
                        <input name="lastName" class="form-control" placeholder="Last Name">
                    </div>
                    <div class="form-group">
                        <label>Date of Birth <i class="fa fa-check"></i></label>
                        <div class='input-group date' id='dateOfBirth-applicant-create'>
                        <input name='dateOfBirth' type='text' class="form-control" placeholder="Date of Birth" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar">
                            </span>
                        </span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Passport No. <i class="fa fa-check"></i></label>
                        <input name="passportNo" class="form-control" placeholder="Passport No.">
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="form-group">
                        <label>OEC</label>
                        <input name="oec" class="form-control" placeholder="OEC">
                    </div>
                    <div class="form-group">
                        <label>CG</label>
                        <input name="cg" class="form-control" placeholder="CG">
                    </div>
                    <div class="form-group">
                        <label>PDOS</label>
                        <input name="pdos" class="form-control" placeholder="PDOS">
                    </div>
                    <div class="form-group">
                        <label>Principal (Tie-Up) <i class="fa fa-check"></i></label>
                        <select id="applicant-create-ddl-principal" name="principal" class="form-control">
                            <!-- CREATE LOGIC HERE -->
                            <option id="">(Select Principal)</option>
                            <option id="">N/A</option>
                            <% for (var i=0; i < ddlTieUp.length; i++) { %>
                                 <option id="<%= ddlTieUp[i].id %>"><%= ddlTieUp[i].name %></option>
                            <% } %>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Employer</label>
                        <input name="employer" class="form-control" placeholder="Employer">
                    </div>
                    <div class="form-group">
                        <label>Country</label>
                        <select name="country" class="form-control">
                            <!-- CREATE LOGIC HERE -->
                            <% for (var i=0; i < ddlCountry.length; i++) { %>
                                 <option><%= ddlCountry[i].name %></option>
                            <% } %>
                        </select>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="form-group">
                        <input name="createdBy" type="hidden" value="<%= me.username %>">
                        <input name="updatedBy" type="hidden" value="<%= me.username %>">
                        <button class="btn btn-info">Save</button>
                    </div>
                </div>
        </form>
    </div>
    <!-- UPDATE APPLICANT TAB -->
    <div role="tabpanel" class="tab-pane" id="tab-applicant-update">
        <form id="applicant-update">
                <div class="col-lg-12">
                    <br/>
                    <a href="#tab-applicant-view" aria-controls="tab-applicant-view" role="tab" data-toggle="tab"><i class="fa fa-arrow-circle-left"></i> Go back</a><br/><br/>
                    <h3>Applicant: Update</h3><br/>
                    <div id="applicant-update-message" class="form-group">
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="form-group">
                       <label>Reference No.  <i class="fa fa-check"></i></label>
                       <input name="referenceNo" class="form-control" placeholder="Reference No." readonly>
                    </div>
                    <div class="form-group">
                        <label>First Name <i class="fa fa-check"></i></label>
                        <input name="firstName" class="form-control" placeholder="First Name">
                    </div>
                    <div class="form-group">
                        <label>Last Name <i class="fa fa-check"></i></label>
                        <input name="lastName" class="form-control" placeholder="Last Name">
                    </div>
                    <div class="form-group">
                        <label>Date of Birth <i class="fa fa-check"></i></label>
                        <div class='input-group date' id='dateOfBirth-applicant-update'>
                        <input name='dateOfBirth' type='text' class="form-control" placeholder="Date of Birth" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar">
                            </span>
                        </span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Passport No. <i class="fa fa-check"></i></label>
                        <input name="passportNo" class="form-control" placeholder="Passport No.">
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="form-group">
                        <label>OEC <i class="fa fa-check"></i></label>
                        <input name="oec" class="form-control" placeholder="OEC">
                    </div>
                    <div class="form-group">
                        <label>CG <i class="fa fa-check"></i></label>
                        <input name="cg" class="form-control" placeholder="CG">
                    </div>
                    <div class="form-group">
                        <label>PDOS <i class="fa fa-check"></i></label>
                        <input name="pdos" class="form-control" placeholder="PDOS">
                    </div>
                    <div class="form-group">
                        <label>Principal (Tie-Up) <i class="fa fa-check"></i></label>
                        <select name="principal" class="form-control">
                            <!-- CREATE LOGIC HERE -->
                            <option id="">(Select Principal)</option>
                            <option id="">N/A</option>
                            <% for (var i=0; i < ddlTieUp.length; i++) { %>
                                 <option id="<%= ddlTieUp[i].id %>"><%= ddlTieUp[i].name %></option>
                            <% } %>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Employer</label>
                        <input name="employer" class="form-control" placeholder="Employer">
                    </div>
                    <div class="form-group">
                        <label>Country</label>
                        <select name="country" class="form-control">
                            <!-- CREATE LOGIC HERE -->
                            <% for (var i=0; i < ddlCountry.length; i++) { %>
                                 <option><%= ddlCountry[i].name %></option>
                            <% } %>
                        </select>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="form-group">
                        <input name="id" type="hidden" class="form-control">
                        <input name="updatedBy" type="hidden" value="<%= me.username %>">
                        <button class="btn btn-info">Update</button>&nbsp;
                        <!--<button class="btn btn-danger">Delete</button>-->
                    </div>
                </div>
        </form>
    </div>
  </div>

            </div>
        </div>
    </div>
</div>
<!-- /.row -->

<!-- Modals -->
<div class="modal fade" id="transaction-update" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="transaction-updateLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Update Transaction</h4>
      </div>
      <div class="modal-body">
            <form id="applicant-transaction-update">
                <div class="form-group">
                            <div id="applicant-transaction-update-message" class="form-group">
                            </div>
                    </div>
                    <div class="form-group">
                            <label>Transaction <i class="fa fa-check"></i></label>
                            <p name="label-transaction"></p>
                    </div>
                    <div class="form-group">
                            <label>Type <i class="fa fa-check"></i></label>
                            <select name="type" name="type" class="form-control">
                                <option>(Select Type)</option>
                            </select>
                    </div>
                    <div class="form-group">
                        <label>Transaction Date <i class="fa fa-check"></i></label>
                        <div class='input-group date' id='transaction-date-update'>
                        <input name='transactionDate' type='text' class="form-control" placeholder="Transaction Date" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar">
                            </span>
                        </span>
                        </div>
                    </div>
                    <div class="form-group" id="cont-transaction-update-actualCost">
                    </div>
                    <div class="form-group">
                            <label>Amount <i class="fa fa-check"></i></label>
                            <input name="amount" class="form-control" placeholder="Amount">
                    </div>
                    <div class="checkbox form-group">
                        <label>
                          <input id="chkbx-void" type="checkbox"> Void Transaction?
                        </label>
                    </div>
                    <div class="form-group" id="cont-transaction-servicefee">
                    </div>
                    <div class="form-group">
                        <input name="id" type="hidden" class="form-control" value="">
                        <input name="owner" type="hidden" class="form-control" value="">
                        <input name="updatedBy" type="hidden" value="<%= me.username %>">
                        <input name="role" type="hidden" value="<%= me.role %>">
                        <input name="status" type="hidden" value="">
                    </div>
                    <div class="form-group">
                        <button name="close" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button class="btn btn-primary">Save changes</button>
                    </div>
            </form>
      </div>
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>
</html>